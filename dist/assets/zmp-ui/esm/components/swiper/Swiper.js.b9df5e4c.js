import{_ as fe}from"../../../../@babel/runtime/helpers/esm/extends.js.5eda35e5.js";import{_ as pe}from"../../../../@babel/runtime/helpers/esm/defineProperty.js.483fbe53.js";import{_ as ve}from"../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js.d71f5ffe.js";import{R as b}from"../../../../react/index.js.fa086085.js";import{c as me}from"../../../../clsx/dist/clsx.m.js.babdd28a.js";import{a as de}from"../../../../@react-spring/web/dist/react-spring-web.esm.js.06b1bd1c.js";import{u as ge}from"../../../../@use-gesture/react/dist/use-gesture-react.esm.js.d0103a3d.js";import{g as Se}from"../../utils/class.js.5fbce117.js";import{g as ye}from"./utils/index.js.2b05309c.js";import{S as xe}from"./context.js.22b55afb.js";import{S as be}from"./SwiperSlide.js.79bf2178.js";import{S as we}from"./SwiperDots.js.fab239c3.js";import{S as h,A as _e,D as he}from"./utils/constants.js.984b9822.js";import{j as Oe}from"../../../../swiper/swiper-react.mjs.f94d42e3.js";import{u as Pe,a as Ae,t as je}from"../../../../@react-spring/core/dist/react-spring-core.esm.js.18824da1.js";import{r as i}from"../../../../react/index.js_commonjs-module.8c7d3518.js";var Ce=["style"];function B(t,v){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);v&&(c=c.filter(function(y){return Object.getOwnPropertyDescriptor(t,y).enumerable})),l.push.apply(l,c)}return l}function G(t){for(var v=1;v<arguments.length;v++){var l=arguments[v]!=null?arguments[v]:{};v%2?B(Object(l),!0).forEach(function(c){pe(t,c,l[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):B(Object(l)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(l,c))})}return t}var Ee=b.forwardRef(function(t,v){var l=t.children,c=t.defaultActive,y=c===void 0?0:c,E=t.dots,J=E===void 0?!0:E,R=t.autoplay,$=R===void 0?!1:R,Q=t.id,Z=t.style,ee=t.className,w=t.afterChange,D=t.duration,k=D===void 0?_e:D,T=t.loop,e=T===void 0?!1:T,M=t.disableSwipe,te=M===void 0?!1:M,O=b.useRef(0),X=b.useRef(0),r=i.exports.useRef(e?y+1:y),I=i.exports.useState(e?y+1:y),m=I[0],A=I[1],P=i.exports.useRef(!1),N=i.exports.useState({xMove:0,down:!1}),q=N[0],re=N[1],n=ye(l,e),F=Pe(n.length,function(){return{opacity:1}}),ne=F[0],L=F[1],Y=Ae(function(){return{translateX:-m*100,moving:0,config:{duration:he}}},[]),U=Y[0],ae=U.translateX,oe=U.moving,x=Y[1],V=Se("swiper"),ie=me(V,ee),W=q.xMove,g=q.down,_=i.exports.useCallback(function(){return e?n.length-2:n.length},[n,e]),d=i.exports.useCallback(function(a,f,p,s){var S=s||1;if(!(f||P.current)){var o=_(),u=r.current;!f&&Math.abs(p)>h&&(r.current+=p>0?-1*S:1*S,u=r.current,r.current===o?(u=e?o:o-1,A(o)):r.current<=0?(u=e?o+r.current%o:0,A(u)):(u=r.current%o,A(u)));var le=r.current%n.length*100;L(function(C){return{opacity:C%o===u?1:.8}}),x({translateX:-le,moving:0,config:{duration:void 0},onStart:function(){P.current=!0},onRest:function(){if(P.current=!1,!e){w==null||w(u);return}r.current===0?(r.current=n.length-2,x({translateX:-r.current*100,moving:0,config:{duration:0}})):r.current===n.length-1&&(r.current=1,x({translateX:-r.current*100,moving:0,config:{duration:0}})),w==null||w(u-1)}})}},[n.length,L,x,w,_,e]),j=i.exports.useCallback(function(a){a-X.current>=k&&(X.current=a,g||d(-1,!1,-(h+1))),O.current=requestAnimationFrame(j)},[g,k,d]),H=i.exports.useCallback(function(){g||!e&&r.current>=n.length-1||d(-1,!1,-(h+1))},[g,d,e,n]),K=i.exports.useCallback(function(){g||!e&&r.current===0||d(-1,!1,h+1)},[g,d,e]),z=i.exports.useCallback(function(a){var f=_(),p=a;a>f-1&&(p=f-1),a<0&&(p=0);var s=p-m;e&&(s+=1),s!==0&&d(-1,!1,-s*(h+1),Math.abs(s))},[m,e,_,d]);i.exports.useImperativeHandle(v,function(){return{next:H,prev:K,goTo:z,activeIndex:e?m-1:m}},[m,H,K,z,e]),i.exports.useEffect(function(){return $&&(O.current=requestAnimationFrame(j)),function(){O.current&&cancelAnimationFrame(O.current)}},[$,j]),i.exports.useEffect(function(){g&&x({moving:W,config:{duration:0}})},[g,W,x]);var se=ge(function(a){var f=a.velocity,p=f[0],s=a.down,S=a.movement,o=S[0];if(!P.current){var u=_();o>0&&r.current===0&&!e||o<0&&r.current>=u-1&&!e||(re({xMove:o,down:s}),d(-p,s,o))}},{filterTaps:!0,enabled:!te}),ue=i.exports.useMemo(function(){return{activeIndex:e?m-1:m,slides:e?n.slice(1,n.length-1):n}},[n,m,e]),ce=je([ae,oe],function(a,f){return"translateX(calc("+a+"% + "+f+"px))"});return b.createElement(xe.Provider,{value:ue},b.createElement("div",{className:ie,id:Q,style:Z},b.createElement(de.div,fe({className:V+"-wrapper",style:{transform:ce}},se()),ne.map(function(a,f){var p=a.opacity,s=n[f],S=s.node.props,o=S.style,u=ve(S,Ce);return i.exports.createElement(be,{style:G(G({},o),{},{opacity:p}),...u,key:s.key},s.children)})),J&&Oe(we,{})))}),He=Ee;export{He as S};
