import{_ as N}from"../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js.d71f5ffe.js";import{R as w}from"../../../../react/index.js.fa086085.js";import{c as E}from"../../../../clsx/dist/clsx.m.js.babdd28a.js";import{g as j}from"../../utils/class.js.5fbce117.js";import{A as B}from"../router/ZMPRouter.js.b1b308b4.js";import{j as K}from"../../../../swiper/swiper-react.mjs.f94d42e3.js";import{a as O}from"../../../../react-router/dist/index.js.cb462a9f.js";import{r as n}from"../../../../react/index.js_commonjs-module.8c7d3518.js";var $=["className","id","style","children","resetScroll","hideScrollbar","restoreScroll","restoreScrollOnBack","name"],A=w.forwardRef(function(r,x){var c,o=n.exports.useContext(B),P=r.className,h=r.id,p=r.style,R=r.children,u=r.resetScroll,f=u===void 0?!0:u,m=r.hideScrollbar,y=m===void 0?!1:m,l=r.restoreScroll,t=r.restoreScrollOnBack,b=r.name,C=N(r,$),d=n.exports.useRef();if(!o&&(l||t))throw new Error("To use Scroll Restoration feature, Page must be contained with ZMPRouter.");var v=O(),T=function(){return t?v.key:b||v.pathname},S=j("page"),a=n.exports.useRef();n.exports.useImperativeHandle(x,function(){return a.current});var _=E(S,(c={},c[S+"-hide-scrollbar"]=y,c),P),s=T(),g=function(){!o||(clearTimeout(d.current),d.current=setTimeout(function(){var i,L=o.updatePosition;L(s,((i=a.current)==null?void 0:i.scrollTop)||0)},150))},k=n.exports.useCallback(function(){if(!!o){var e=o.pageScrollPosition;if(e[s]!==void 0&&t||l){var i;a.current.scrollTo(0,(i=e==null?void 0:e[s])!=null?i:0)}}},[l,t,o,s]);return n.exports.useLayoutEffect(function(){var e=a.current;return e&&o&&(l||t)&&(k(),e==null||e.addEventListener("scroll",g)),f&&!l&&!t&&e.scrollTo(0,0),function(){e&&o&&(l||t)&&(e==null||e.removeEventListener("scroll",g))}},[a,f,l,t]),K("div",{...C,className:_,id:h,style:p,ref:a,children:R})}),F=A;export{F as P};
