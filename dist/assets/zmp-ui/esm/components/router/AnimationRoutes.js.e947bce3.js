import{_ as Y}from"../../../../@babel/runtime/helpers/esm/defineProperty.js.483fbe53.js";import{_ as K}from"../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js.d71f5ffe.js";import{R as k}from"../../../../react/index.js.fa086085.js";import{c as P}from"../../../../clsx/dist/clsx.m.js.babdd28a.js";import{g as G}from"../../utils/class.js.5fbce117.js";import{i as U}from"../../utils/device.js.93914ced.js";import{A as z}from"./ZMPRouter.js.b1b308b4.js";import{P as v,A as C,N as D}from"./common/constant.js.24051634.js";import{j as d}from"../../../../swiper/swiper-react.mjs.f94d42e3.js";import{b as B,a as V,c as q}from"../../../../react-router/dist/index.js.cb462a9f.js";import{r as n}from"../../../../react/index.js_commonjs-module.8c7d3518.js";import{A as H}from"../../../../@remix-run/router/dist/router.js.27e90fd1.js";import{T as J}from"../../../../react-transition-group/esm/TransitionGroup.js.b4a519df.js";import{C as Q}from"../../../../react-transition-group/esm/CSSTransition.js.9af520fd.js";var Z=["element"];function I(a,s){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);s&&(o=o.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable})),r.push.apply(r,o)}return r}function O(a){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?I(Object(r),!0).forEach(function(o){Y(a,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(r,o))})}return a}var S=function(s){var r,o=B(),f=n.exports.useRef(v.FORWARD),g=s.children,_=n.exports.useContext(z),R=_||{},u=R.animate,m=R.setAnimate,w=R.direction,b=V(),h=b.pathname,c=n.exports.useRef(null),l=n.exports.useRef(null),x=n.exports.useRef({}),p=G("routes"),L=function(e){if(!e)return"";var i=e.charAt(0)!=="/"?"/"+e:e;return i.lastIndexOf("/")>0&&(i=i.substring(0,i.length-1)),i},y=n.exports.useCallback(function(t){var e=L(t);return e?(x.current[String(e)]||(x.current[String(e)]=n.exports.createRef()),x.current[String(e)]):null},[]),M=n.exports.useMemo(function(){return n.exports.Children.map(g,function(t){if(k.isValidElement(t)){var e=t.props,i=e.element,A=K(e,Z);return!i||i.props.replace===!0?t:O(O({},t),{},{props:O(O({},A),{},{element:i})})}return t})},[g]),N=function(e){c.current=e.touches[0].clientX,l.current=e.touches[0].clientY},T=function(e){if(c.current!==null&&l.current!==null){var i=e.touches[0].clientX,A=e.touches[0].clientY,E=c.current-i,X=l.current-A;c.current<=24&&Math.abs(E)>Math.abs(X)&&E<=0&&u&&(e.preventDefault(),m==null||m({animate:!1}),e.preventDefault()),c.current=null,l.current=null}};n.exports.useEffect(function(){var t=U();return t&&(document.addEventListener("touchstart",N,{passive:!1}),document.addEventListener("touchmove",T,{passive:!1})),function(){t&&(document.removeEventListener("touchstart",N),document.removeEventListener("touchmove",T))}},[]),u&&(f.current=o===H.Pop?v.BACKWARD:w||v.FORWARD);var F=P((r={},r[p+"-"+f.current]=u,r[p+"-no-animation"]=!u,r)),W=P(p,{}),j=n.exports.useMemo(function(){return y(h)},[h,y]);return d(J,{className:W,childFactory:function(e){return n.exports.cloneElement(e,{classNames:F,timeout:u?C:D})},children:d(Q,{timeout:u?C:D,onExited:function(){m==null||m({animate:!0,direction:v.FORWARD})},nodeRef:j,unmountOnExit:!0,children:d("div",{ref:j,className:p+"-item",children:d(q,{location:b,children:M})})},h)})};S.displayName="zaui-animation-router";var pe=S;export{pe as A};
